Todo:
-----

- assignments
	- each assignment reads from a location.
	- if expression is a constant, link it in from the constant table.
	- if not:
		- declare a new temporary variable (i.e. allocate some space)
		- evaluate the expression into this space
		- use this address in the assignment
	- use the same strategy for control expressions in ifs, whiles etc.
	- A multi-byte assignment must have as many linkvals as there are bytes.
		- e.g. when assigning from a pointer that is actually a label:
		- we need a const location for each byte of the const pointer value.
	- Everything is a pointer! unless otherwise specified.
		- ints are actually managed internally as pointers to ints (we do this already)
		- int literals are actually pointers to int constants: x = 5; should set x to 5 dammit!
- macros
- Add type checking
	- every expression has a type field - the parser doesn't touch it, the compiler sets it and the compiler and linker use it.
	- to find the type of an expression:
		- find the types of sub-expressions (recursive)
		- apply rules to find the type of this expression
	- this lets linker know how many write instructions to emit, etc. (see implementation of link(assignment*);)
- Create "object" class containing the file's definitions
	- make it (de)serializable?
- bulk out the standard library
- add comments to tokenizer!
- functions in expressions (with results)
	- have a proper return mechanism for user-defined etc.
	- have hardcoded ones like const(8), second(16), first(16) etc.
	- means we need a proper function signature class for return types
- if we assign from a function result, pass the assignment target into the function link routine.
	- this way we can write straight to the assignment target
	- perhaps save this for after everything's working?
	- still probably better for function return location to be decided for caller, more convenient that way
- Use object destructors to give debug information as the stack is unwound: "inside while, inside function main" etc.
	- "defuse" them if the function completes successfully, otherwise they'll print an error message when destroyed.
- Clear up distinctions between what's a value and what's a pointer to a value.
- make linker valtable contain linkvals, so we can have chains of symbols (sym1->sym2->constant)